#include "Finger_Detector.h"

#include "Adc.h"
#include "IfxVadc.h"
#include "IfxVadc_Adc.h"
#include "Platform_Types.h"

/*********************************************************************************************************************/
/*------------------------------------------------------Macros-------------------------------------------------------*/
/*********************************************************************************************************************/
#define THRESHOLD       4000

/*********************************************************************************************************************/
/*-------------------------------------------------Global variables--------------------------------------------------*/
/*********************************************************************************************************************/
IfxVadc_Adc_Channel g_finger_detector = { .channel = IfxVadc_ChannelId_4, .resultreg = IfxVadc_ChannelResult_0 };

/*********************************************************************************************************************/
/*---------------------------------------------Function Implementations----------------------------------------------*/
/*********************************************************************************************************************/
void Init_Finger_Detector(void) {
    Init_Vadc_Channel(&g_finger_detector);
}

boolean Read_Finger_State(void) {
    return (Read_Adc_Value(&g_finger_detector) < THRESHOLD);
}
